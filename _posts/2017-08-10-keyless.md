---
layout: post
title: KEYLESS简介
date: 2017-8-04
categories: blog
tags: [openssl]
description: 介绍KEYLESS工作原理。
---



### 前言

​	随着互联网时代的到来，各个网站的用户访问量也呈现大幅度的增加，对网站的服务器带来很大的压力，导致服务质量降低。为了解决这个问题，网站开始使用内容分发网络(CDN)技术，该技术通过合理分布的节点缓存信息，让用户可以从网络质量最好的节点快速获取信息，缓解源站压力，提高服务质量，改善用户体验。

​	同时，近年来网络安全也得到了更多的关注，大型网站陆续完成全站HTTPS的改造，通过HTTPS对数据进行加密，防止信息泄漏和篡改。HTTPS和CDN技术几乎都已成为商业网站必须的基础服务。

​	HTTPS 是一种端到端的协议，通信双方需要进行身份认证和数据加密。在CDN的工作场景中，服务提供方并不是互联网公司本身，而是以中间人的方式工作的CDN节点。这两种技术共存就涉及到如何将认证及加解密过程从源站下放到CDN节点的问题。

​	目前的常规方案是HTTPS网站将证书以及私钥提供给CDN服务商，由CDN服务商管理证书和私钥，实现加速。其中私钥是HTTPS协议中安全性要求最高的信息，许多网站出于安全考虑无法对CDN服务商提供私钥，所以无法使用CDN服务进行加速。

​	针对上述情况，我司推出针对HTTPS的“无私钥加速方案”，在不需要HTTPS网站提供私钥的情况下，为这些网站提供CDN加速服务。

### 无私钥加速方案

​	无私钥加速方案需要HTTPS网站搭建私钥服务器，服务器上部署我司提供的KeyServer服务程序。通过将 SSL 握手过程中需要用到私钥的计算部分通过KeyServer进行剥离，实现无私钥的加速方案。具体过程如下图所示。

![](../../../../Desktop/Snip20170815_10.png)

1. 用户向CDN节点发起HTTPS请求，开始密钥交换的握手过程；
2. 密钥交换过程中不涉及私钥的部分按照正常的握手逻辑进行，需要使用私钥进行计算的内容由CDN节点发送给客户的私钥服务器，在私钥服务器上完成相关计算并将结果返回给CDN节点，继续后续计算；
3. CDN节点和终端用户通过密钥交换过程得到对称密钥，后续的消息使用对称密钥进行加密传输；

### KeyServer特性

* 基于Linux操作系统
* 基于异步事件驱动架构，并发支持能力强
* 支持与CDN节点之间通信消息加密
* 支持openssl操作的异步模式
* 支持服务质量可视化监控
* 支持多素数RSA私钥，提高私钥操作的效率







